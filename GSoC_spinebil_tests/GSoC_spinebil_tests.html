<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tina">
<meta name="dcterms.date" content="2025-03-26">

<title>GSoC 2025: Tests for the Spinebil R package</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="GSoC_spinebil_tests_files/libs/clipboard/clipboard.min.js"></script>
<script src="GSoC_spinebil_tests_files/libs/quarto-html/quarto.js"></script>
<script src="GSoC_spinebil_tests_files/libs/quarto-html/popper.min.js"></script>
<script src="GSoC_spinebil_tests_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="GSoC_spinebil_tests_files/libs/quarto-html/anchor.min.js"></script>
<link href="GSoC_spinebil_tests_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="GSoC_spinebil_tests_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="GSoC_spinebil_tests_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="GSoC_spinebil_tests_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="GSoC_spinebil_tests_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">📦 Overview</a></li>
  <li><a href="#first-test" id="toc-first-test" class="nav-link" data-scroll-target="#first-test">1️⃣ First test</a>
  <ul class="collapse">
  <li><a href="#first-check-devtoolscheck" id="toc-first-check-devtoolscheck" class="nav-link" data-scroll-target="#first-check-devtoolscheck">🔍 First Check: <code>devtools::check()</code></a></li>
  <li><a href="#first-error-there-is-no-package-called-binostics" id="toc-first-error-there-is-no-package-called-binostics" class="nav-link" data-scroll-target="#first-error-there-is-no-package-called-binostics">❗ First Error : There is no package called <code>binostics</code></a></li>
  <li><a href="#updating-package-dependencies" id="toc-updating-package-dependencies" class="nav-link" data-scroll-target="#updating-package-dependencies">🔧 Updating Package Dependencies</a></li>
  <li><a href="#re-checking-the-package" id="toc-re-checking-the-package" class="nav-link" data-scroll-target="#re-checking-the-package">Re-checking the Package</a></li>
  <li><a href="#error-in-squintangleestimate" id="toc-error-in-squintangleestimate" class="nav-link" data-scroll-target="#error-in-squintangleestimate">❗ Error in <code>squintAngleEstimate()</code></a></li>
  <li><a href="#how-i-fixed-it" id="toc-how-i-fixed-it" class="nav-link" data-scroll-target="#how-i-fixed-it">🔧 How I fixed it</a></li>
  <li><a href="#two-additional-errors-detected-during-devtoolscheck" id="toc-two-additional-errors-detected-during-devtoolscheck" class="nav-link" data-scroll-target="#two-additional-errors-detected-during-devtoolscheck">❗ Two Additional Errors Detected During <code>devtools::check()</code></a></li>
  </ul></li>
  <li><a href="#second-test" id="toc-second-test" class="nav-link" data-scroll-target="#second-test">2️⃣ Second test</a>
  <ul class="collapse">
  <li><a href="#github-actions-workflow-check-result" id="toc-github-actions-workflow-check-result" class="nav-link" data-scroll-target="#github-actions-workflow-check-result">✅ GitHub Actions Workflow Check Result</a></li>
  </ul></li>
  <li><a href="#third-test" id="toc-third-test" class="nav-link" data-scroll-target="#third-test">3️⃣ Third Test</a>
  <ul class="collapse">
  <li><a href="#step-1-install-and-load-the-tourr-package" id="toc-step-1-install-and-load-the-tourr-package" class="nav-link" data-scroll-target="#step-1-install-and-load-the-tourr-package">🔍 Step 1: Install and load the <code>tourr</code> package</a></li>
  <li><a href="#step-2-call-the-stringy-function-and-understand-its-usage" id="toc-step-2-call-the-stringy-function-and-understand-its-usage" class="nav-link" data-scroll-target="#step-2-call-the-stringy-function-and-understand-its-usage">🔍 Step 2: Call the stringy function and understand its usage</a></li>
  <li><a href="#creating-the-first-dataset-spiral-pattern" id="toc-creating-the-first-dataset-spiral-pattern" class="nav-link" data-scroll-target="#creating-the-first-dataset-spiral-pattern">Creating the First Dataset: Spiral Pattern</a></li>
  <li><a href="#simulation" id="toc-simulation" class="nav-link" data-scroll-target="#simulation">Simulation</a></li>
  <li><a href="#creating-the-second-dataset-random-noise-data" id="toc-creating-the-second-dataset-random-noise-data" class="nav-link" data-scroll-target="#creating-the-second-dataset-random-noise-data">Creating the Second Dataset: Random Noise Data</a></li>
  <li><a href="#simulation-1" id="toc-simulation-1" class="nav-link" data-scroll-target="#simulation-1">Simulation</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">GSoC 2025: Tests for the Spinebil R package</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Tina </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 26, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">📦 Overview</h2>
<p>This document describes the process of running the tests for the <code>spinebil</code> package and how I identified and resolved various issues to make the package pass <code>devtools::check()</code> with <strong>no errors or warnings</strong>. This is part of my work for <strong>Google Summer of Code 2025</strong>.</p>
<p>In addition to the <code>devtools::check()</code> debugging, I also completed the other two required tests:</p>
<ul>
<li>I added a <strong>GitHub Actions workflow</strong> to automate CRAN checks.</li>
<li>I conducted a <strong>simulation study</strong> to explore the minimum and maximum of the <code>stringy</code> scagnostic index.</li>
</ul>
</section>
<section id="first-test" class="level2">
<h2 class="anchored" data-anchor-id="first-test">1️⃣ First test</h2>
<ul>
<li>Easy: Fork the package and run the package checks using devtools. Make the fixes needed for it to pass CRAN checks.</li>
</ul>
<section id="first-check-devtoolscheck" class="level3">
<h3 class="anchored" data-anchor-id="first-check-devtoolscheck">🔍 First Check: <code>devtools::check()</code></h3>
<p>To begin, I created a Quarto (<code>.qmd</code>) file inside a new folder named <code>GSoC_spinebil_tests</code> within the <code>spinebil</code> package repository that I have froked. Since <code>.qmd</code> files are not part of a typical R package structure, I added the file to <code>.Rbuildignore</code> to ensure that <code>devtools::check()</code> would not throw an error during the package check process.</p>
<p>Next, I installed and loaded the <code>devtools</code> package using:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, I ran <code>devtools::check()</code> to evaluate the current state of the <code>spinebil</code> package and identify any errors, warnings, or notes that need to be fixed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">check</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>── R CMD check results ──────────────────────────────── spinebil 0.1.1 ────</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>Duration: 15.4s</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>❯ checking examples with --run-donttest ... ERROR</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  Running examples in ‘spinebil-Ex.R’ failed</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  The error most likely occurred in:</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  &gt; base::assign(".ptime", proc.time(), pos = "CheckExEnv")</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  &gt; ### Name: compareSmoothing</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  &gt; ### Title: Compare traces with different smoothing options.</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  &gt; ### Aliases: compareSmoothing</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  &gt; </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  &gt; ### ** Examples</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  &gt; </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  &gt; ## No test: </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  &gt; d &lt;- spiralData(4, 100)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  &gt; tPath &lt;- tourr::save_history(d, max_bases=2)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  &gt; tPath &lt;- as.list(tourr::interpolate(tPath))</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  &gt; idx &lt;- scagIndex("Skinny")</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  &gt; compS &lt;- compareSmoothing(d, tPath, idx, n=5)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  Error in loadNamespace(x) : there is no package called ‘binostics’</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  Calls: compareSmoothing ... loadNamespace -&gt; withRestarts -&gt; withOneRestart -&gt; doWithOneRestart</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  Execution halted</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>❯ checking package dependencies ... NOTE</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  Package suggested but not available for checking: ‘binostics’</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>1 error ✖ | 0 warnings ✔ | 1 note ✖</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="first-error-there-is-no-package-called-binostics" class="level3">
<h3 class="anchored" data-anchor-id="first-error-there-is-no-package-called-binostics">❗ First Error : There is no package called <code>binostics</code></h3>
<p>The <code>binostics</code> package was originally used in <code>spinebil</code> to compute scagnostic indices. However, <code>binostics</code> has been deprecated and removed from CRAN, making it unusable as a dependency for a CRAN-ready package.</p>
<p>To resolve this, I replaced all usage of <code>binostics</code> with the <a href="https://cran.r-project.org/package=cassowaryr"><code>cassowaryr</code></a> package, which is an actively maintained package on CRAN that also computes scagnostics. It provides similar functionality and includes functions like <code>calc_scags()</code> and individual index functions such as <code>sc_stringy()</code> and <code>sc_skinny()</code>.</p>
</section>
<section id="updating-package-dependencies" class="level3">
<h3 class="anchored" data-anchor-id="updating-package-dependencies">🔧 Updating Package Dependencies</h3>
<p>In order to use the <code>cassowaryr</code> package, which provides scagnostic computations, I added <code>cassowaryr</code> to the <code>Imports</code> field in the <code>DESCRIPTION</code> file of the <code>spinebil</code> package.</p>
<p>At the same time, I removed the <code>binostics</code> package from the <code>Suggests</code> field, as it is deprecated and no longer available on CRAN. Keeping it in <code>DESCRIPTION</code> caused errors during <code>devtools::check()</code>, so removing it was necessary for compatibility.</p>
<section id="changes-made-to-description" class="level4">
<h4 class="anchored" data-anchor-id="changes-made-to-description"><strong>Changes made to <code>DESCRIPTION</code>:</strong></h4>
<p>Before:</p>
<ul>
<li>Imports: tourr, ggplot2, tibble, stats, dplyr, tidyr, tictoc, magrittr</li>
<li>Suggests: minerva, binostics, testthat, purrr</li>
</ul>
<p>After:</p>
<ul>
<li>Imports: tourr, ggplot2, tibble, stats, dplyr, tidyr, tictoc, magrittr, cassowaryr</li>
<li>Suggests: minerva, testthat, purrr</li>
</ul>
</section>
</section>
<section id="re-checking-the-package" class="level3">
<h3 class="anchored" data-anchor-id="re-checking-the-package">Re-checking the Package</h3>
<p>After updating the <code>DESCRIPTION</code> file to include <code>cassowaryr</code> and removing <code>binostics</code>, I re-ran the full package check using:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">check</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb5"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>── R CMD check results ─────────────────────────────── spinebil 0.1.1 ────</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>Duration: 10.1s</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>❯ checking examples with --run-donttest ... ERROR</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  Running examples in ‘spinebil-Ex.R’ failed</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  The error most likely occurred in:</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  &gt; base::assign(".ptime", proc.time(), pos = "CheckExEnv")</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  &gt; ### Name: compareSmoothing</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  &gt; ### Title: Compare traces with different smoothing options.</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  &gt; ### Aliases: compareSmoothing</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  &gt; </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  &gt; ### ** Examples</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  &gt; </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  &gt; ## No test: </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  &gt; d &lt;- spiralData(4, 100)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  &gt; tPath &lt;- tourr::save_history(d, max_bases=2)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  &gt; tPath &lt;- as.list(tourr::interpolate(tPath))</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  &gt; idx &lt;- scagIndex("Skinny")</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  &gt; compS &lt;- compareSmoothing(d, tPath, idx, n=5)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  Error in loadNamespace(x) : there is no package called ‘binostics’</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  Calls: compareSmoothing ... loadNamespace -&gt; withRestarts -&gt; withOneRestart -&gt; doWithOneRestart</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  Execution halted</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>❯ checking dependencies in R code ... WARNING</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  '::' or ':::' import not declared from: ‘binostics’</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  Namespace in Imports field not imported from: ‘cassowaryr’</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    All declared Imports should be used.</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>1 error ✖ | 1 warning ✖ | 0 notes ✔</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now, the error message indicated that all imported packages must be used, and that the examples in the <code>spinebil</code> package still referenced the deprecated <code>binostics</code> package. To fix this, I needed to update all examples that used <code>binostics</code> functions and replace them with equivalent calls from the <code>cassowaryr</code> package.</p>
<p>For instance, in the <code>distances.R</code> file, under the examples for “Estimating squint angle of 2-D structure in high-D dataset”, the following line originally used the <code>scagIndex()</code> function from <code>binostics</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>indexF <span class="ot">&lt;-</span> <span class="fu">scagIndex</span>(<span class="st">"Skinny"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To make it work with <code>cassowaryr</code> package, and to avoid runtime errors, I converted it into a proper function that takes a projected dataset xy as input:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>indexF <span class="ot">&lt;-</span> <span class="cf">function</span>(xy) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  cassowaryr<span class="sc">::</span><span class="fu">calc_scags</span>(xy[, <span class="dv">1</span>], xy[, <span class="dv">2</span>], <span class="at">scag =</span> <span class="st">"skinny"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I then applied the same modification across all other example files in the package where <code>binostics</code> was used. In each case, I replaced calls to <code>scagIndex()</code> with a functional form using <code>cassowaryr::calc_scags()</code>, ensuring that the index function accepts a projected dataset (<code>xy</code>) as input.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">check</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb9"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>── R CMD check results ─────────────────────────────── spinebil 0.1.1 ────</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>Duration: 13m 1.7s</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>❯ checking examples with --run-donttest ... [13m/13m] ERROR</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  Running examples in ‘spinebil-Ex.R’ failed</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  The error most likely occurred in:</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  &gt; base::assign(".ptime", proc.time(), pos = "CheckExEnv")</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  &gt; ### Name: squintAngleEstimate</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  &gt; ### Title: Estimating squint angle of 2-d structure in high-d dataset under</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  &gt; ###   selected index.</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  &gt; ### Aliases: squintAngleEstimate</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  &gt; </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  &gt; ### ** Examples</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  &gt; </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  &gt; ## No test: </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  &gt; data &lt;- spiralData(4, 100)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  &gt; indexF &lt;- function(xy){cassowaryr::calc_scags(xy[,1], xy[,2], scag ="skinny")[[1]]}</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  &gt; cutoff &lt;- 0.7</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>   &gt; structurePlane &lt;- basisMatrix(3,4,4)</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  &gt; squintAngleEstimate(data, indexF, cutoff, structurePlane, n=1)</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  Error in allBases[[j]] : subscript out of bounds</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  Calls: squintAngleEstimate</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  Execution halted</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>❯ checking dependencies in R code ... WARNING</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  '::' or ':::' import not declared from: ‘binostics’</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  Namespace in Imports field not imported from: ‘cassowaryr’</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    All declared Imports should be used.</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>1 error ✖ | 1 warning ✖ | 0 notes ✔</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="error-in-squintangleestimate" class="level3">
<h3 class="anchored" data-anchor-id="error-in-squintangleestimate">❗ Error in <code>squintAngleEstimate()</code></h3>
<p>While running <code>devtools::check()</code>, I encountered the following runtime error in the examples of the <code>squintAngleEstimate()</code> function:</p>
<p>Error in allBases[[j]] : subscript out of bounds</p>
<p>This error occurred during the example execution because the index <code>j</code> exceeded the length of the <code>allBases</code> list. In the function, <code>allBases</code> contains interpolated projection matrices. The loop that searches for a projection with an index value exceeding a given cutoff did not check whether <code>j</code> had gone out of bounds, leading to the error.</p>
</section>
<section id="how-i-fixed-it" class="level3">
<h3 class="anchored" data-anchor-id="how-i-fixed-it">🔧 How I fixed it</h3>
<p>To resolve this issue, I updated the loop to include a boundary check using:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>while (cIndex &lt; cutoff &amp;&amp; j &lt;= length(allBases)) {</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  cProj &lt;- data %*% allBases[[j]]</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  cIndex &lt;- indexF(cProj)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  j &lt;- j + 1</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Additionally, I added a conditional check after the loop to avoid accessing an invalid index:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>if (j &gt; length(allBases)) {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  angles[i] &lt;- NA</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>} else {</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  cDist &lt;- tourr::proj_dist(allBases[[j]], structurePlane)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  angles[i] &lt;- cDist</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>These changes prevent the function from crashing and allow it to return NA if no projection satisfies the cutoff condition, making the function more robust during package checks and real usage.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">check</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb13"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>── R CMD check results ─────────────────────────────── spinebil 0.1.1 ────</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>Duration: 13m 20s</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>❯ checking examples with --run-donttest ... [13m/13m] ERROR</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  Running examples in ‘spinebil-Ex.R’ failed</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  The error most likely occurred in:</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  &gt; base::assign(".ptime", proc.time(), pos = "CheckExEnv")</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  &gt; ### Name: timeSequence</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  &gt; ### Title: Time each index evaluation for projections in the tour path.</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  &gt; ### Aliases: timeSequence</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  &gt; </span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  &gt; ### ** Examples</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  &gt; </span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  &gt; ## No test: </span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  &gt; d &lt;- spiralData(4, 1000)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  &gt; t &lt;- purrr::rerun(10, tourr::basis_random(4))</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  Warning: `rerun()` was deprecated in purrr 1.0.0.</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  ℹ Please use `map()` instead.</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>   # Previously</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    rerun(10, tourr::basis_random(4))</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>    # Now</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    map(1:10, ~ tourr::basis_random(4))</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  &gt; idx &lt;- indexF &lt;- function(xy){cassowaryr::calc_scags(xy[,1], xy[,2], scag ="skinny")[[1]]}</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  &gt; timeSequence(d, t, idx, 10)</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  Error in unlist(tictoc::tic.log(format = FALSE))["toc.elapsed"] - unlist(tictoc::tic.log(format = FALSE))["tic.elapsed"] : </span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>    non-numeric argument to binary operator</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>  Calls: timeSequence</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>  Execution halted</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>❯ checking dependencies in R code ... WARNING</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>  '::' or ':::' import not declared from: ‘binostics’</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>  Namespace in Imports field not imported from: ‘cassowaryr’</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>    All declared Imports should be used.</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>1 error ✖ | 1 warning ✖ | 0 notes ✔</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="two-additional-errors-detected-during-devtoolscheck" class="level3">
<h3 class="anchored" data-anchor-id="two-additional-errors-detected-during-devtoolscheck">❗ Two Additional Errors Detected During <code>devtools::check()</code></h3>
<p>While re-running <code>devtools::check()</code> on the updated <code>spinebil</code> package, I encountered two more issues:</p>
<section id="deprecated-purrrrerun-function" class="level4">
<h4 class="anchored" data-anchor-id="deprecated-purrrrerun-function">1. Deprecated <code>purrr::rerun()</code> function</h4>
<p>Warning: rerun() was deprecated in purrr 1.0.0. ℹ Please use map() instead. I replaced it with <code>purrr::map()</code></p>
</section>
<section id="runtime-error-in-timesequence-due-to-unlist-on-tictoctic.log" class="level4">
<h4 class="anchored" data-anchor-id="runtime-error-in-timesequence-due-to-unlist-on-tictoctic.log">2. Runtime error in timeSequence() due to unlist() on tictoc::tic.log()</h4>
<p>The function originally used:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>resT &lt;- unlist(tictoc::tic.log(format = FALSE))["toc.elapsed"] -</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>         unlist(tictoc::tic.log(format = FALSE))["tic.elapsed"]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This caused the following error:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>non-numeric argument to binary operator</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Calling unlist() returns a list where each element (like “toc.elapsed”) may be coerced to a character string, breaking numeric subtraction.</p>
<p>I rewrote this part of the function to extract the toc and tic values as numeric values:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>log &lt;- tictoc::tic.log(format = FALSE)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>resT &lt;- log[[1]]$toc - log[[1]]$tic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I also updated the code inside <code>timer.R</code> to fix an issue with how the list of projection matrices was generated. Originally, the code used:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>t &lt;- purrr::map(10, tourr::basis_random(4))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>However, this caused problems during matrix multiplication because the output was not a list of 10 projection matrices as intended, instead, it returned a single-element list. This led to a mismatch in dimensions when using %*%. I replaced it with the following:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>t &lt;- purrr::map(1:10, ~ tourr::basis_random(4))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now, I will run <code>devtools::check()</code> once again to verify the current state of the package and see if any new errors, warnings, or notes appear.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">check</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb20"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>── R CMD check results ─────────────────────────────── spinebil 0.1.1 ────</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>Duration: 13m 20.2s</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>❯ checking dependencies in R code ... WARNING</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  '::' or ':::' import not declared from: ‘binostics’</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>0 errors ✔ | 1 warning ✖ | 0 notes ✔</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After running <code>devtools::check()</code>, I encountered the following warning:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>checking dependencies in R code ... WARNING '::' or ':::' import not declared from: ‘binostics’</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To identify the source of this warning, I used <code>Cmd + Shift + F</code> in RStudio to search for the term <code>binostics</code> across the entire package directory. I discovered that the warning was coming from the <code>indexFunctions.R</code> file, where the <code>binostics</code> package was still being used inside the <code>scagIndex()</code> function.</p>
<p>The original line was:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>sR &lt;- binostics::scagnostics(mat)[1,][indexName]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I replaced it with the corresponding function from the cassowaryr package:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>sR &lt;- cassowaryr::calc_scags(mat)[1,][indexName]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After implementing all necessary fixes, replacing deprecated functions, updating dependencies, and cleaning up example code, I ran a final <code>devtools::check()</code> to validate the package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">check</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode" id="cb25"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>── R CMD check results ─────────────────────────────── spinebil 0.1.1 ────</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>Duration: 13m 9.5s</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>0 errors ✔ | 0 warnings ✔ | 0 notes ✔</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This indicates that the package has passed all checks successfully and is ready for CRAN submission.</p>
</section>
</section>
</section>
<section id="second-test" class="level2">
<h2 class="anchored" data-anchor-id="second-test">2️⃣ Second test</h2>
<ul>
<li>Medium: Add a GitHub Actions workflow to automate the CRAN checks when code is pushed to the GitHub.</li>
</ul>
<p>To automate CRAN-style checks for the <code>spinebil</code> package, I created a GitHub Actions workflow named <code>R-CMD-check</code>. This workflow is located at <code>.github/workflows/R-CMD-check.yaml</code> and runs automatically on every push or pull request to the repository.</p>
<p>After pushing the workflow file to GitHub, I verified that the action was triggered successfully via the “Actions” tab in my repository.</p>
<section id="github-actions-workflow-check-result" class="level3">
<h3 class="anchored" data-anchor-id="github-actions-workflow-check-result">✅ GitHub Actions Workflow Check Result</h3>
<p>The GitHub Actions workflow ran successfully, showing that the <code>spinebil</code> package passes <code>R CMD check</code> on all major platforms.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/r-cmd-check-success.png" class="img-fluid figure-img"></p>
<figcaption>R CMD check success</figcaption>
</figure>
</div>
</section>
</section>
<section id="third-test" class="level2">
<h2 class="anchored" data-anchor-id="third-test">3️⃣ Third Test</h2>
<ul>
<li>Hard: Write a simulation to check the minimum and maximum values that we might observe for any 2D pattern for the stringy index available in tourr package. Report the data generated for testing, and the minimum and maximum values that would be expected.</li>
</ul>
<p>I am going to install and load the required libraries, and then I will test the <code>stringy</code> function for two datasets:</p>
<ul>
<li>A 2D dataset generated using <code>spiralData()</code> which is available in the <code>spinebil</code> package.</li>
<li>A random noise dataset generated using <code>rnorm()</code>.</li>
</ul>
<p>Then, I will run a simulation to find the maximum and minimum values of the <code>stringy</code> index for these two types of patterns.</p>
<section id="step-1-install-and-load-the-tourr-package" class="level3">
<h3 class="anchored" data-anchor-id="step-1-install-and-load-the-tourr-package">🔍 Step 1: Install and load the <code>tourr</code> package</h3>
<p>The <code>stringy</code> function is available in the <code>tourr</code> package. First, I install and load it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("tourr")</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tourr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-2-call-the-stringy-function-and-understand-its-usage" class="level3">
<h3 class="anchored" data-anchor-id="step-2-call-the-stringy-function-and-understand-its-usage">🔍 Step 2: Call the stringy function and understand its usage</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>tourr<span class="sc">::</span><span class="fu">stringy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (mat) 
{
    cassowaryr::sc_stringy(mat[, 1], mat[, 2])
}
&lt;bytecode: 0x13077ffe8&gt;
&lt;environment: 0x130780528&gt;</code></pre>
</div>
</div>
<p>When I inspect the <code>stringy()</code> function using <code>tourr::stringy</code>, we see that it is actually from a different package. The actual computation of the stringy index is performed by the function <code>sc_stringy()</code> from the <code>cassowaryr</code> package.</p>
<p>The <code>stringy</code> index is one of the scagnostics (scatterplot diagnostics) features. It measures how much a 2D scatterplot resembles a stringy or elongated structure. The value of <code>stringy</code> is always between 0 and 1:</p>
<ul>
<li>A higher value (close to 1) indicates that the data has a strong stringy or elongated pattern.</li>
<li>A lower value (close to 0) suggests the data is more scattered, unstructured, or noise-like.</li>
</ul>
<p>To explore this behavior, I will apply the <code>stringy</code> index to two datasets:</p>
<ol type="1">
<li><strong>Spiral dataset</strong>: Using <code>spiralData()</code> from the <code>spinebil</code> package, which generates a spiral pattern. I expect this to have a high stringy value because of its elongated structure.</li>
<li><strong>Noise dataset</strong>: Generated using <code>rnorm()</code>, which creates spread-out, structureless data. I expect the <code>stringy</code> index to be low for this case.</li>
</ol>
</section>
<section id="creating-the-first-dataset-spiral-pattern" class="level3">
<h3 class="anchored" data-anchor-id="creating-the-first-dataset-spiral-pattern">Creating the First Dataset: Spiral Pattern</h3>
<p>First, I created a dataset with a clear elongated structure using the <code>spiralData()</code> function from the <code>spinebil</code> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>first_data <span class="ot">&lt;-</span> spinebil<span class="sc">::</span><span class="fu">spiralData</span>(<span class="dv">2</span>, <span class="dv">1000</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>first_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(first_data)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(first_data, <span class="fu">aes</span>(<span class="at">x =</span> V1, <span class="at">y =</span> V2 )) <span class="sc">+</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"spiral structure"</span>) <span class="sc">+</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">aspect.ratio =</span> <span class="dv">1</span>,</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">colour =</span> <span class="st">"black"</span>)</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="GSoC_spinebil_tests_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This function generates a 2D spiral-shaped dataset, which is a good candidate for exhibiting a high <code>stringy</code> value due to its long, continuous structure.</p>
<p>To calculate the stringiness of this dataset, I have used the following approaches:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using `tourr` package</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>tourr<span class="sc">::</span><span class="fu">stringy</span>()(first_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.991911</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using the `cassowaryr` package directly</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>cassowaryr<span class="sc">::</span><span class="fu">sc_stringy</span>(first_data[,<span class="dv">1</span>], first_data[,<span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.991911</code></pre>
</div>
</div>
<p>As observed from the result, the spiral dataset gave a <code>stringy</code> value of approximately 0.99, which indicates a highly elongated and stringy pattern. This aligns with my expectation, as spiral-shaped data exhibits strong continuity.</p>
<p>Now, to better understand the behavior of the <code>stringy</code> index, I will run a simulation.</p>
</section>
<section id="simulation" class="level3">
<h3 class="anchored" data-anchor-id="simulation">Simulation</h3>
<p>To explore the min and max of values, I simulated the process 500 times using <code>spiralData()</code> and stored all resulting stringy values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1225</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>n_sim <span class="ot">&lt;-</span> <span class="dv">500</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">sim =</span> <span class="fu">numeric</span>(<span class="dv">0</span>), <span class="at">stringy_val =</span> <span class="fu">numeric</span>(<span class="dv">0</span>))</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_sim) {</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> spinebil<span class="sc">::</span><span class="fu">spiralData</span>(<span class="dv">2</span>, <span class="dv">1000</span>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data[<span class="sc">!</span><span class="fu">duplicated</span>(data), ]  </span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  val <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">suppressWarnings</span>(cassowaryr<span class="sc">::</span><span class="fu">sc_stringy</span>(data[,<span class="dv">1</span>], data[,<span class="dv">2</span>]))</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    <span class="cn">NA</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  new_row <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">sim =</span> i, <span class="at">stringy_val =</span> val)</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results, new_row)</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>results <span class="sc">%&gt;%</span></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_stringy =</span> <span class="fu">min</span>(stringy_val, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_stringy =</span> <span class="fu">max</span>(stringy_val, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  min_stringy max_stringy
1   0.9888551    0.998997</code></pre>
</div>
</div>
<p>This output will give the minimum and maximum <code>stringy</code> values observed across all simulated spiral patterns.</p>
</section>
<section id="creating-the-second-dataset-random-noise-data" class="level3">
<h3 class="anchored" data-anchor-id="creating-the-second-dataset-random-noise-data">Creating the Second Dataset: Random Noise Data</h3>
<p>To compare the behavior of the <code>stringy</code> index on unstructured data, I created a dataset consisting of two columns of values randomly generated from a standard normal distribution using <code>rnorm()</code>. Since this data is randomly scattered and does not follow any clear pattern or direction, I expect the <code>stringy</code> index to return low values, close to 0.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>noise1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">300</span>, <span class="dv">0</span>, <span class="dv">1</span>) </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>noise2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">300</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>second_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(noise1, noise2)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(second_data, <span class="fu">aes</span>(<span class="at">x =</span> noise1, <span class="at">y =</span> noise2 )) <span class="sc">+</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"random noise"</span>) <span class="sc">+</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">aspect.ratio =</span> <span class="dv">1</span>,</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">colour =</span> <span class="st">"black"</span>)</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="GSoC_spinebil_tests_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>cassowaryr<span class="sc">::</span><span class="fu">sc_stringy</span>(noise1,noise2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7489362</code></pre>
</div>
</div>
</section>
<section id="simulation-1" class="level3">
<h3 class="anchored" data-anchor-id="simulation-1">Simulation</h3>
<p>Now in the simulations, I will repeat this process 500 times to explore the minimum and maximum <code>stringy</code> values for random noise.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">4567</span>)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>n_sim <span class="ot">&lt;-</span> <span class="dv">500</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>results_noise <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">sim =</span> <span class="fu">numeric</span>(<span class="dv">0</span>), <span class="at">stringy_val =</span> <span class="fu">numeric</span>(<span class="dv">0</span>))</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_sim) {</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  noise1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">300</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  noise2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">300</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">cbind</span>(noise1, noise2)</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  val <span class="ot">&lt;-</span> cassowaryr<span class="sc">::</span><span class="fu">sc_stringy</span>(data[, <span class="dv">1</span>], data[, <span class="dv">2</span>])</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  results_noise <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results_noise, <span class="fu">data.frame</span>(<span class="at">sim =</span> i, <span class="at">stringy_val =</span> val))</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>results_noise <span class="sc">%&gt;%</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_stringy =</span> <span class="fu">min</span>(stringy_val, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_stringy =</span> <span class="fu">max</span>(stringy_val, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  min_stringy max_stringy
1   0.6576577   0.7842324</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>